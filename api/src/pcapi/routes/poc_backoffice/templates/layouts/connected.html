{% extends "layouts/base.html" %}

{% set menu = [
    {"label": "Recherche", "url": url_for("poc_backoffice_web.search_public_accounts")}
] %}

{% macro subMenuHeader(name) %}
    <hr class="mdc-deprecated-list-divider">
    <h6 class="mdc-deprecated-list-group__subheader">{{ name }}</h6>
{% endmacro %}

{% macro menuItem(label, url) %}
    <a
        href={{ url }}
        class="mdc-deprecated-list-item {{ "mdc-deprecated-list-item--activated" if url == request.path else "" }}"
    >
        <span class="mdc-deprecated-list-item__ripple"></span>
        <span class="mdc-deprecated-list-item__text">{{ label }}</span>
    </a>
{% endmacro %}

{% block content %}
    <aside class="mdc-drawer">
        <div class="mdc-drawer__header">
            <h3 class="mdc-drawer__title">Backoffice</h3>
            <h6 class="mdc-drawer__subtitle">{{ current_user.email }}</h6>
        </div>
        <div class="mdc-drawer__content">
            <nav class="mdc-deprecated-list">

                {{ subMenuHeader("Jeunes et grand public") }}
                {{ menuItem("Recherche", url_for("poc_backoffice_web.search_public_accounts")) }}

                {{ subMenuHeader("Acteurs Culturels") }}
                {{ menuItem("Recherche", url_for("poc_backoffice_web.search_pro")) }}

            </nav>
        </div>
    </aside>
    <div class="drawer-frame-app-content">
        <header class="mdc-top-app-bar drawer-top-app-bar">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <span class="mdc-top-app-bar__title">
                        {% block pageTitle %}{% endblock %}
                    </span>
                </section>
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                    <form action={{ url_for("poc_backoffice_web.logout") }} method="post">
                        <button type="submit" value="logout" class="mdc-icon-button material-icons mdc-top-app-bar__action-item--unbounded" aria-label="logout">logout</button>
                    </form>
                </section>
            </div>
        </header>
        <div class="drawer-main-content">
            <div class="mdc-top-app-bar--fixed-adjust"></div>
            {% block page %}{% endblock %}
        </div>
    </div>

{% endblock %}
